import{j as t}from"./app-CufLBv5l.js";import{F as u}from"./FieldGroup-pKt1HwqB.js";import{S as m}from"./react-select.esm-CLiBStjE.js";import{T as k,C as _}from"./ConfirmDelete-D4ZJQyGB.js";import{C}from"./CancelButton-Do8aYWQH.js";import{L as P}from"./LoadingButton-D9FrXbHX.js";import{c as w}from"./createLucideIcon-DcqoyYvx.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],R=w("plus",B);function U({isDisabled:o,children:d,...a}){return t.jsx("button",{type:"button",className:`btn btn--sm btn--primary ${o?"cursor-not-allowed opacity-50":"cursor-pointer"}`,disabled:o,...a,children:d})}function L({data:o,setData:d,errors:a,processing:n,selectOption:b,page:i="User"}){const{bus:f,roles:h}=b,x=o.pivots.map(e=>e.bu_id).filter(e=>e!==""),j=e=>f.filter(s=>{var l;return!x.includes(s.value)||((l=o.pivots[e])==null?void 0:l.bu_id)===s.value}),c=e=>{const s=e([...o.pivots]);d("pivots",s)},p=()=>{c(e=>[...e,{bu_id:"",buSelected:"",role_id:"",roleSelected:""}])},y=async e=>{await _()&&c(l=>l.filter((r,S)=>S!==e))},N=(e,s)=>{c(l=>(l[s].bu_id=e.value,l[s].buSelected=e,l))},v=(e,s)=>{const l=e.map(r=>r.value);c(r=>(r[s].role_id=l,r[s].roleSelected=e,r))};return t.jsxs("div",{className:"content-box",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("p",{className:"text-xl font-bold",children:"Bu and Roles"}),i==="User"&&t.jsxs(U,{isDisabled:n,onClick:p,children:[t.jsx(R,{strokeWidth:3,size:16,className:"inline-block mb-1"})," Add Role"]})]}),o.pivots.map((e,s)=>t.jsxs("div",{className:"flex flex-row items-start my-2",children:[i==="User"&&t.jsxs("button",{type:"button",className:`btn btn--sm btn--danger py-3 inline-block max-w-fit flex-none me-2 ${n||o.pivots.length==1?"cursor-not-allowed opacity-50":"cursor-pointer"}`,disabled:n||o.pivots.length==1,onClick:()=>y(s),children:[t.jsx(k,{strokeWidth:3,size:18,className:"mb-1 inline-block"})," Delete"]}),t.jsx(u,{error:a[`pivots.${s}.bu_id`],children:t.jsx(m,{options:j(s),value:e.buSelected,className:"mt-1 block w-80 me-2",menuPortalTarget:document.body,menuPosition:"fixed",placeholder:"Select Business Unit...",onChange:l=>N(l,s),required:!0,isDisabled:i==="Profile"})}),t.jsx(u,{className:"block w-full",error:a[`pivots.${s}.role_id`],children:t.jsx(m,{isMulti:!0,options:h,value:e.roleSelected,className:"mt-1 w-full",menuPortalTarget:document.body,menuPosition:"fixed",placeholder:"Select Roles...",onChange:l=>v(l,s),required:!0,isDisabled:i==="Profile"})})]},s)),t.jsxs("div",{className:"flex justify-end mt-2",children:[!n&&t.jsx(C,{routeName:i==="User"?"users.index":"dashboard"}),t.jsx(P,{disabled:n,children:"Submit"})]})]})}export{L as default};
